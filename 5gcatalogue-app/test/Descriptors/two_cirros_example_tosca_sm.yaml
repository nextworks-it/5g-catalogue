toscaDefinitionsVersion: tosca_2_cirros_test_0_1
toscaDefaultNamespace: test
description: Descriptor for 2 cirros test NS

metadata:
 descriptorId: 339b0999-80c3-456c-9ee7-4cf42e4f7be7
 vendor: Nextworks
 version: "0.1"

nodeTypes:
 cirros_NS:
  derivedFrom: tosca.nodes.nfv.NS
  properties:
   descriptorId:
    type: string
    constraints: [validValues: [339b0999-80c3-456c-9ee7-4cf42e4f7be7]]
    default: 339b0999-80c3-456c-9ee7-4cf42e4f7be7
   designer:
    type: string
    constraints: [validValues: [Nextworks]]
    default: Nextworks
   version:
    type: string
    default: "0.1"
   name:
    type: string
    default: cirros_2_test_nsd
   invariantId:
    type: string
    default: 339b0999-80c3-456c-9ee7-4cf42e4f7be7
   flavourId:
    type: string
    default: simple

topologyTemplate:

 substitutionMappings:
  nodeType: cirros_NS
  requirements:
   virtualLink: ["eth0", "vld_mgmt"]

 nodeTemplates:

  eth0:
   type: tosca.nodes.nfv.Sap
   requirements:
    externalVirtualLink: [vld_mgmt]

  vld_mgmt:
   type: tosca.nodes.nfv.NsVirtualLink
   properties:
    description: Mgmt VL
    testAccess: [NONE]
    vlProfile:
     maxBitrateRequirements:
      root: 1000000
      leaf: 100000
     minBitrateRequirements:
      root: 100000
      leaf: 10000
    connectivityType:
     layerProtocols: [IPV4]
     flowPattern: LINE

  firstVNF:
   type: tosca.nodes.nfv.VNF
   properties:
    descriptorId: cirros_vnfd
    descriptorVersion: "0.1"
    provider: Nextworks
    productName: cirros_test_1
    softwareVersion: v5.3
    productInfoName: cirros VNF for test NS
    productInfoDescription: cirros VNF for test NS
    vnfmInfo:
     - juju
    localizationLanguages:
     - ENG
    defaultLocalizationLanguage: ENG
    configurableProperties:
     isAutoscaleEnabled: "false"
     isAutohealEnabled: "false"
    flavourId: cirrosDf_001
    flavourDescription: vCache Edge DF
   requirements:
    virtualLink:
     - vld_mgmt
   capabilities:
    monitoringParameter:
     - cpuLoad

  secondVNF:
   type: tosca.nodes.nfv.VNF
   properties:
    descriptorId: cirros_vnfd
    descriptorVersion: "0.1"
    provider: Nextworks
    productName: cirros_test_2
    softwareVersion: v5.3
    productInfoName: cirros VNF for test NS
    productInfoDescription: cirros VNF for test NS
    vnfmInfo:
     - juju
    localizationLanguages:
     - ENG
    defaultLocalizationLanguage: ENG
    configurableProperties:
     isAutoscaleEnabled: "false"
     isAutohealEnabled: "false"
    flavourId: cirrosDf_001
    flavourDescription: vCache Edge DF
   requirements:
    virtualLink:
     - vld_mgmt
   capabilities:
    monitoringParameter:
     - cpuLoad
